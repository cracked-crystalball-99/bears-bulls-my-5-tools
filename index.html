<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Technical Analysis Tool</title>
    <link rel="stylesheet" href="styles-testing.css?v=2.0">
    <script src="custom-chart.js"></script>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📊</text></svg>">
    
  <!-- Google Analytics (Privacy-Compliant) -->
  <script>
    // Privacy-first analytics with opt-out mechanism
    (function() {
      'use strict';
      
      // Check for user consent
      const analyticsConsent = localStorage.getItem('analytics-consent');
      
      if (analyticsConsent === 'granted') {
        // User has consented - load GA
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-DY4TBEES4D', {
          'anonymize_ip': true,
          'cookie_expires': 86400,
          'send_page_view': true
        });
        
        // Load GA script
        const script = document.createElement('script');
        script.async = true;
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-DY4TBEES4D';
        document.head.appendChild(script);
        
        // Store consent timestamp
        localStorage.setItem('analytics-consent', 'granted');
      }
      
      // Privacy protection function
      window.clearAnalytics = function() {
        localStorage.setItem('analytics-consent', 'denied');
        // Clear any existing GA cookies
        document.cookie = '_ga=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
        document.cookie = '_ga_DY4TBEES4D=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
        document.cookie = '_gid=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
      };
      
      // Lightweight privacy system versioning
      if (!localStorage.getItem('privacy-system-version')) {
        localStorage.setItem('privacy-system-version', '2.0');
      }
    })();
  </script>
</head>
<body>
    <h1>Technical Analysis Tool</h1>

    <!-- Custom Text and Link -->
<p>Check out my other project: <a href="https://cracked-crystalball-99.github.io/chess-engine/" target="_blank">
  Use the Chess Engine
</a></p>

    <!-- Form to load CSV file -->
    <form id="csvForm">
        <label for="csvFile">Choose CSV file:</label>
        <input type="file" id="csvFile" accept=".csv" title="Choose a CSV file">
        <button type="submit">Load CSV</button>
    </form>

    <h1>Stock or Crypto Ticker Search</h1>
    <div class="ticker-search">
        <input type="text" id="ticker-input" placeholder="Type a ticker or entity name">
        <div id="suggestions"></div>
    </div>

    <!-- Date Picker -->
    <div class="date-picker">
        <div class="pre-select-buttons">
            <button class="pre-select" data-range="1D">1D</button>
            <button class="pre-select" data-range="5D">5D</button>
            <button class="pre-select" data-range="3M">3M</button>
            <button class="pre-select" data-range="6M">6M</button>
            <button class="pre-select" data-range="YTD">YTD</button>
            <button class="pre-select" data-range="1Y">1Y</button>
            <button class="pre-select" data-range="5Y">5Y</button>
            <button class="pre-select" data-range="MAX">MAX</button>
        </div>
        <label for="start-date">Start Date:</label>
        <input type="date" id="start-date">
        <label for="end-date">End Date:</label>
        <input type="date" id="end-date">
        <button id="fetch-data-button">Fetch Data</button>
    </div>

    <!-- Container for buttons and tables -->
    <div class="container">
        <!-- Table 1: Displaying CSV File Data -->
        <h2>Displaying My Yahoo CSV File Data (Table 1)</h2>
        <div class="scrollable">
            <table id="csvTable">
                <thead id="csvTableHead">
                    <tr>
                        <th>Date</th>
                        <th>Open</th>
                        <th>High</th>
                        <th>Low</th>
                        <th>Close</th>
                        <th>Adj Close</th>
                        <th>Volume</th>
                    </tr>
                </thead>
                <tbody id="csvTableBody"></tbody>
            </table>
        </div>

        <!-- ADX Values -->
        <div class="section">
            <div class="tooltip full-width-button">
                <button id="computeAdxValuesButton">Compute ADX Values</button>
                <span class="tooltiptext">
                    <strong>What is ADX?</strong> The Average Directional Index (ADX) measures the strength of a trend. <br><br>
                    <strong>What can it do for me as a trader?</strong> ADX helps identify strong trends, which can be useful for making trading decisions. <br><br>
                    <strong>How can it be calculated?</strong> ADX is calculated using the difference between the positive and negative directional indicators over a specified period.
                </span>
            </div>
            <h2>ADX Values (Table 2)</h2>
            <div class="scrollable">
                <table id="adxTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>DI+</th>
                            <th>DI-</th>
                            <th>DX</th>
                            <th>ADX</th>
                        </tr>
                    </thead>
                    <tbody id="adxTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- ADXTR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeAdxtrValuesButton">Compute ADXTR Values</button>
                <span class="tooltiptext">
                    <strong>What is ADXTR?</strong> ADX Trading Signals (ADXTR) are generated based on ADX values. <br><br>
                    <strong>What can it do for me as a trader?</strong> ADXTR provides buy and sell signals based on the strength of the trend, helping traders make informed decisions. <br><br>
                    <strong>How can it be calculated?</strong> ADXTR signals are generated when ADX crosses certain thresholds, indicating changes in trend strength.
                </span>
            </div>
            <h2>ADXTR Values (Table 3)</h2>
            <div class="scrollable">
                <table id="adxtrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>ADXTR</th>
                        </tr>
                    </thead>
                    <tbody id="adxtrTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Add other tables as needed -->

    </div>

        <!-- BB Values -->
        <div class="section">
            <div class="tooltip full-width-button">
                <button id="computeBbValuesButton" class="full-width-button">Compute BB Values</button>
                <span class="tooltiptext">
                    <strong>What is BB?</strong> Bollinger Bands (BB) measure volatility by plotting bands around a moving average. <br><br>
                    <strong>What can it do for me as a trader?</strong> BB helps identify overbought and oversold conditions, as well as potential price breakouts. <br><br>
                    <strong>How can it be calculated?</strong> BB is calculated using a moving average and standard deviations to plot upper and lower bands.
                </span>
            </div>
            <h2>BB Values (Table 4)</h2>
            <div class="scrollable">
                <table id="bbTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Lower Band</th>
                            <th>Mean</th>
                            <th>Upper Band</th>
                            <th>%B</th>
                        </tr>
                    </thead>
                    <tbody id="bbTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- BBTR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeBbtrValuesButton" class="full-width-button">Compute BBTR Values</button>
                <span class="tooltiptext">
                    <strong>What is BBTR?</strong> Bollinger Bands Trading Signals (BBTR) are generated based on BB values. <br><br>
                    <strong>What can it do for me as a trader?</strong> BBTR provides buy and sell signals based on the price's interaction with the Bollinger Bands. <br><br>
                    <strong>How can it be calculated?</strong> BBTR signals are generated when the price crosses the upper or lower Bollinger Bands.
                </span>
            </div>
            <h2>BBTR Values (Table 5)</h2>
            <div class="scrollable">
                <table id="bbtrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>BBTR</th>
                        </tr>
                    </thead>
                    <tbody id="bbtrTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- CCI Values -->
        <div class="section">
            <div class="tooltip full-width-button">
                <button id="computeCciValuesButton" class="full-width-button">Compute CCI Values</button>
                <span class="tooltiptext">
                    <strong>What is CCI?</strong> The Commodity Channel Index (CCI) measures the deviation of the price from its average. <br><br>
                    <strong>What can it do for me as a trader?</strong> CCI helps identify overbought and oversold conditions, as well as potential trend reversals. <br><br>
                    <strong>How can it be calculated?</strong> CCI is calculated using the typical price, a moving average, and the mean deviation.
                </span>
            </div>
            <h2>CCI Values (Table 6)</h2>
            <div class="scrollable">
                <table id="cciTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>CCI</th>
                        </tr>
                    </thead>
                    <tbody id="cciTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- CCITR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeCcitrValuesButton" class="full-width-button">Compute CCITR Values</button>
                <span class="tooltiptext">
                    <strong>What is CCITR?</strong> Commodity Channel Index Trading Signals (CCITR) are generated based on CCI values. <br><br>
                    <strong>What can it do for me as a trader?</strong> CCITR provides buy and sell signals based on the CCI's interaction with overbought and oversold levels. <br><br>
                    <strong>How can it be calculated?</strong> CCITR signals are generated when the CCI crosses certain thresholds, indicating overbought or oversold conditions.
                </span>
            </div>
            <h2>CCITR Values (Table 7)</h2>
            <div class="scrollable">
                <table id="ccitrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>CCITR</th>
                        </tr>
                    </thead>
                    <tbody id="ccitrTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- MACD Values -->
        <div class="section">
            <div class="tooltip full-width-button">
                <button id="computeMacdValuesButton" class="full-width-button">Compute MACD Values</button>
                <span class="tooltiptext">
                    <strong>What is MACD?</strong> The Moving Average Convergence Divergence (MACD) is a trend-following momentum indicator. <br><br>
                    <strong>What can it do for me as a trader?</strong> MACD helps identify changes in the strength, direction, momentum, and duration of a trend. <br><br>
                    <strong>How can it be calculated?</strong> MACD is calculated by subtracting the 26-period EMA from the 12-period EMA, with a 9-period EMA as the signal line.
                </span>
            </div>
            <h2>MACD Values (Table 8)</h2>
            <div class="scrollable">
                <table id="macdTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>MACD</th>
                            <th>Signal Line</th>
                        </tr>
                    </thead>
                    <tbody id="macdTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- CMACD Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeCmacdValuesButton" class="full-width-button">Compute CMACDTR Values</button>
                <span class="tooltiptext">
                    <strong>What is CMACD?</strong> The Centreline Moving Average Convergence Divergence (CMACD) is a variation of the MACD. <br><br>
                    <strong>What can it do for me as a trader?</strong> CMACD helps identify changes in the strength, direction, momentum, and duration of a trend. <br><br>
                    <strong>How can it be calculated?</strong> CMACD is calculated similarly to MACD but focuses on the centerline crossovers.
                </span>
            </div>
            <h2>CMACDTR Values (Table 9)</h2>
            <div class="scrollable">
                <table id="cmacdTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>CMACD</th>
                        </tr>
                    </thead>
                    <tbody id="cmacdTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- SMACD Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeSmacdValuesButton" class="full-width-button">Compute SMACDTR Values</button>
                <span class="tooltiptext">
                    <strong>What is SMACD?</strong> The Signal Moving Average Convergence Divergence (SMACD) is a variation of the MACD. <br><br>
                    <strong>What can it do for me as a trader?</strong> SMACD helps identify changes in the strength, direction, momentum, and duration of a trend. <br><br>
                    <strong>How can it be calculated?</strong> SMACD is calculated similarly to MACD but focuses on the signal line crossovers.
                </span>
            </div>
            <h2>SMACDTR Values (Table 10)</h2>
            <div class="scrollable">
                <table id="smacdTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>SMACD Signal</th>
                        </tr>
                    </thead>
                    <tbody id="smacdTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- ROC Values -->
        <div class="section">
            <div class="tooltip full-width-button">
                <button id="computeRocValuesButton" class="full-width-button">Compute ROC Values</button>
                <span class="tooltiptext">
                    <strong>What is ROC?</strong> The Rate of Change (ROC) measures the percentage change in price over a specified period. <br><br>
                    <strong>What can it do for me as a trader?</strong> ROC helps identify the speed and magnitude of price changes, which can be useful for making trading decisions. <br><br>
                    <strong>How can it be calculated?</strong> ROC is calculated by dividing the difference between the current price and the price n periods ago by the price n periods ago, then multiplying by 100.
                </span>
            </div>
            <h2>ROC Values (Table 11)</h2>
            <div class="scrollable">
                <table id="rocTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Close</th>
                        </tr>
                    </thead>
                    <tbody id="rocTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- ROCTR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeRoctrValuesButton" class="full-width-button">Compute ROCTR Values</button>
                <span class="tooltiptext">
                    <strong>What is ROCTR?</strong> Rate of Change Trading Signals (ROCTR) are generated based on ROC values. <br><br>
                    <strong>What can it do for me as a trader?</strong> ROCTR provides buy and sell signals based on the ROC's interaction with certain thresholds. <br><br>
                    <strong>How can it be calculated?</strong> ROCTR signals are generated when the ROC crosses certain thresholds, indicating changes in momentum.
                </span>
            </div>
            <h2>ROCTR Values (Table 12)</h2>
            <div class="scrollable">
                <table id="roctrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>ROCTR</th>
                        </tr>
                    </thead>
                    <tbody id="roctrTableBody"></tbody>
                </table>
            </div>
        </div>

    <!-- New Tables (13-26) -->
        <!-- RSI Values -->
        <div class="section">
            <div class="tooltip full-width-button">
                <button id="computeRsiValuesButton" class="full-width-button">Compute RSI Values</button>
                <span class="tooltiptext">
                    <strong>What is RSI?</strong> The Relative Strength Index (RSI) measures the speed and change of price movements. <br><br>
                    <strong>What can it do for me as a trader?</strong> RSI helps identify overbought and oversold conditions, which can be useful for making trading decisions. <br><br>
                    <strong>How can it be calculated?</strong> RSI is calculated using the average gains and losses over a specified period, typically 14 days.
                </span>
            </div>
            <h2>RSI Values (Table 13)</h2>
            <div class="scrollable">
                <table id="rsiTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>RSI</th>
                        </tr>
                    </thead>
                    <tbody id="rsiTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- RSITR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeRsitrValuesButton" class="full-width-button">Compute RSITR Values</button>
                <span class="tooltiptext">
                    <strong>What is RSITR?</strong> Relative Strength Index Trading Signals (RSITR) are generated based on RSI values. <br><br>
                    <strong>What can it do for me as a trader?</strong> RSITR provides buy and sell signals based on the RSI's interaction with overbought and oversold levels. <br><br>
                    <strong>How can it be calculated?</strong> RSITR signals are generated when the RSI crosses certain thresholds, indicating overbought or oversold conditions.
                </span>
            </div>
            <h2>RSITR Values (Table 14)</h2>
            <div class="scrollable">
                <table id="rsitrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>RSITR</th>
                        </tr>
                    </thead>
                    <tbody id="rsitrTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- SAR Values -->
        <div class="section">
            <div class="tooltip full-width-button">
                <button id="computeSarValuesButton" class="full-width-button">Compute SAR Values</button>
                <span class="tooltiptext">
                    <strong>What is SAR?</strong> The Parabolic Stop and Reverse (SAR) is a trend-following indicator that sets trailing stop-loss levels. <br><br>
                    <strong>What can it do for me as a trader?</strong> SAR helps identify potential reversals in the direction of the price movement, which can be useful for setting stop-loss levels and identifying entry and exit points. <br><br>
                    <strong>How can it be calculated?</strong> SAR is calculated using the most recent extreme price (EP) and an acceleration factor (AF).
                </span>
            </div>
            <h2>SAR Values (Table 15)</h2>
            <div class="scrollable">
                <table id="sarTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>SAR</th>
                        </tr>
                    </thead>
                    <tbody id="sarTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- SARTR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeSartrValuesButton" class="full-width-button">Compute SARTR Values</button>
                <span class="tooltiptext">
                    <strong>What is SARTR?</strong> SAR Trading Signals (SARTR) are generated based on SAR values. <br><br>
                    <strong>What can it do for me as a trader?</strong> SARTR provides buy and sell signals based on the SAR's interaction with the price, helping traders make informed decisions. <br><br>
                    <strong>How can it be calculated?</strong> SARTR signals are generated when the price crosses the SAR, indicating potential reversals.
                </span>
            </div>
            <h2>SARTR Values (Table 16)</h2>
            <div class="scrollable">
                <table id="sartrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>SARTR</th>
                        </tr>
                    </thead>
                    <tbody id="sartrTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- SMI Values -->
        <div class="section">
            <div class="tooltip full-width-button">
                <button id="computeSmiValuesButton" class="full-width-button">Compute SMI Values</button>
                <span class="tooltiptext">
                    <strong>What is SMI?</strong> The Stochastic Momentum Index (SMI) measures the position of the current close relative to the midpoint of the recent high/low range. <br><br>
                    <strong>What can it do for me as a trader?</strong> SMI helps identify overbought and oversold conditions, as well as potential trend reversals. <br><br>
                    <strong>How can it be calculated?</strong> SMI is calculated using the difference between the current close and the midpoint of the recent high/low range, smoothed using exponential moving averages.
                </span>
            </div>
            <h2>SMI Values (Table 17)</h2>
            <div class="scrollable">
                <table id="smiTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>SMI</th>
                        </tr>
                    </thead>
                    <tbody id="smiTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- SMITR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeSmitrValuesButton" class="full-width-button">Compute SMITR Values</button>
                <span class="tooltiptext">
                    <strong>What is SMITR?</strong> Stochastic Momentum Index Trading Signals (SMITR) are generated based on SMI values. <br><br>
                    <strong>What can it do for me as a trader?</strong> SMITR provides buy and sell signals based on the SMI's interaction with overbought and oversold levels. <br><br>
                    <strong>How can it be calculated?</strong> SMITR signals are generated when the SMI crosses certain thresholds, indicating overbought or oversold conditions.
                </span>
            </div>
            <h2>SMITR Values (Table 18)</h2>
            <div class="scrollable">
                <table id="smitrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>SMITR</th>
                        </tr>
                    </thead>
                    <tbody id="smitrTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- WPR Values -->
        <div class="section">
            <div class="tooltip full-width-button">
                <button id="computeWprValuesButton" class="full-width-button">Compute WPR Values</button>
                <span class="tooltiptext">
                    <strong>What is WPR?</strong> Williams %R (WPR) is a momentum indicator that measures overbought and oversold levels. <br><br>
                    <strong>What can it do for me as a trader?</strong> WPR helps identify overbought and oversold conditions, as well as potential trend reversals. <br><br>
                    <strong>How can it be calculated?</strong> WPR is calculated using the highest high, lowest low, and the most recent closing price over a specified period.
                </span>
            </div>
            <h2>WPR Values (Table 19)</h2>
            <div class="scrollable">
                <table id="wprTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>WPR</th>
                        </tr>
                    </thead>
                    <tbody id="wprTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- WPRTR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeWprtrValuesButton" class="full-width-button">Compute WPRTR Values</button>
                <span class="tooltiptext">
                    <strong>What is WPRTR?</strong> Williams %R Trading Signals (WPRTR) are generated based on WPR values. <br><br>
                    <strong>What can it do for me as a trader?</strong> WPRTR provides buy and sell signals based on the WPR's interaction with overbought and oversold levels. <br><br>
                    <strong>How can it be calculated?</strong> WPRTR signals are generated when the WPR crosses certain thresholds, indicating overbought or oversold conditions.
                </span>
            </div>
            <h2>WPRTR Values (Table 20)</h2>
            <div class="scrollable">
                <table id="wprtrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>WPRTR</th>
                        </tr>
                    </thead>
                    <tbody id="wprtrTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- SMA5 Values -->
        <div class="section">
            <div class="tooltip full-width-button">
                <button id="computeSma5ValuesButton" class="full-width-button">Compute SMA5 Values</button>
                <span class="tooltiptext">
                    <strong>What is SMA5?</strong> The Simple Moving Average (SMA) for 5 observations calculates the average of the closing prices for the last 5 periods. <br><br>
                    <strong>What can it do for me as a trader?</strong> SMA5 helps identify the direction of the trend and can act as a support or resistance level. <br><br>
                    <strong>How can it be calculated?</strong> SMA5 is calculated by adding the closing prices of the last 5 periods and dividing by 5.
                </span>
            </div>
            <h2>SMA5 Values (Table 21)</h2>
            <div class="scrollable">
                <table id="sma5Table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>SMA5</th>
                        </tr>
                    </thead>
                    <tbody id="sma5TableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Table 22: CCISMATR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeCcismatrValuesButton" class="full-width-button">Compute CCISMATR Values</button>
                <span class="tooltiptext">
                    <strong>What is CCISMATR?</strong> Commodity Channel Index Simple Moving Average Trading Signals (CCISMATR) are generated based on CCI and SMA values. <br><br>
                    <strong>What can it do for me as a trader?</strong> CCISMATR provides buy and sell signals based on the interaction of CCI and SMA, helping traders make informed decisions. <br><br>
                    <strong>How can it be calculated?</strong> CCISMATR signals are generated when the CCI crosses above or below the SMA, indicating potential buy or sell opportunities.
                </span>
            </div>
            <h2>CCISMATR Values (Table 22)</h2>
            <div class="scrollable">
                <table id="ccismatrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Signal</th>
                        </tr>
                    </thead>
                    <tbody id="ccismatrTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Table 23: ROCSMATR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeRocsmatrValuesButton" class="full-width-button">Compute ROCSMATR Values</button>
                <span class="tooltiptext">
                    <strong>What is ROCSMATR?</strong> Rate of Change Simple Moving Average Trading Signals (ROCSMATR) are generated based on ROC and SMA values. <br><br>
                    <strong>What can it do for me as a trader?</strong> ROCSMATR provides buy and sell signals based on the interaction of ROC and SMA, helping traders make informed decisions. <br><br>
                    <strong>How can it be calculated?</strong> ROCSMATR signals are generated when the ROC crosses above or below the SMA, indicating potential buy or sell opportunities.
                </span>
            </div>
            <h2>ROCSMATR Values (Table 23)</h2>
            <div class="scrollable">
                <table id="rocsmatrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Signal</th>
                        </tr>
                    </thead>
                    <tbody id="rocsmatrTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Table 24: RSISMATR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeRsismatrValuesButton" class="full-width-button">Compute RSISMATR Values</button>
                <span class="tooltiptext">
                    <strong>What is RSISMATR?</strong> Relative Strength Index Simple Moving Average Trading Signals (RSISMATR) are generated based on RSI and SMA values. <br><br>
                    <strong>What can it do for me as a trader?</strong> RSISMATR provides buy and sell signals based on the interaction of RSI and SMA, helping traders make informed decisions. <br><br>
                    <strong>How can it be calculated?</strong> RSISMATR signals are generated when the RSI crosses above or below the SMA, indicating potential buy or sell opportunities.
                </span>
            </div>
            <h2>RSISMATR Values (Table 24)</h2>
            <div class="scrollable">
                <table id="rsismatrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Signal</th>
                        </tr>
                    </thead>
                    <tbody id="rsismatrTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Table 25: SMISMATR Values -->
        <div class="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeSmismatrValuesButton" class="full-width-button">Compute SMISMATR Values</button>
                <span class="tooltiptext">
                    <strong>What is SMISMATR?</strong> Stochastic Momentum Index Simple Moving Average Trading Signals (SMISMATR) are generated based on SMI and SMA values. <br><br>
                    <strong>What can it do for me as a trader?</strong> SMISMATR provides buy and sell signals based on the interaction of SMI and SMA, helping traders make informed decisions. <br><br>
                    <strong>How can it be calculated?</strong> SMISMATR signals are generated when the SMI crosses above or below the SMA, indicating potential buy or sell opportunities.
                </span>
            </div>
            <h2>SMISMATR Values (Table 25)</h2>
            <div class="scrollable">
                <table id="smismatrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>SMISMATR</th>
                        </tr>
                    </thead>
                    <tbody id="smismatrTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Table 26: WPRSMATR Values -->
        <div class ="section">
            <div class="tooltip full-width-button has-chart">
                <button id="computeWprsmatrValuesButton" class="full-width-button">Compute WPRSMATR Values</button>
                <span class="tooltiptext">
                    <strong>What is WPRSMATR?</strong> Williams Percent Range Simple Moving Average Trading Signals (WPRSMATR) are generated based on WPR and SMA values. <br><br>
                    <strong>What can it do for me as a trader?</strong> WPRSMATR provides buy and sell signals based on the interaction of WPR and SMA, helping traders make informed decisions. <br><br>
                    <strong>How can it be calculated?</strong> WPRSMATR signals are generated when the WPR crosses above or below the SMA, indicating potential buy or sell opportunities.
                </span>
            </div>
            <h2>WPRSMATR Values (Table 26)</h2>
            <div class="scrollable">
                <table id="wprsmatrTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>WPRSMATR</th>
                        </tr>
                    </thead>
                    <tbody id="wprsmatrTableBody"></tbody>
                </table>
            </div>
        </div>

    
    <!-- Votes Innovative Percentages (VIP %) -->
    <h2>Votes Innovative Percentages (VIP %)</h2>
    <div class="scrollable">
        <table id="votesTable">
            <thead>
                <tr>
                    <th>Technical Analysis Tool (TAT)</th>
                    <th>Buy?</th>
                    <th>Sell?</th>
                    <th>Tool Voice Count (TVC)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Tool #1 Average Directional Index Trading Signals (ADXTR)</td>
                    <td id="b2"></td> <!-- Buy votes -->
                    <td id="c2"></td> <!-- Sell votes -->
                    <td id="d2"></td> <!-- Total voice count & Conditional formatting cell -->
                </tr>
                <tr><td>Tool #2 Bollinger Bands Trading Signals (BBTR)</td><td id="b3"></td><td id="c3"></td><td id="d3"></td></tr>
                <tr><td>Tool #3 Commodity Channel Index Trading Signals (CCITR)</td><td id="b4"></td><td id="c4"></td><td id="d4"></td></tr>
                <tr><td>Tool #4 Centreline Moving Average Convergence Divergence (MACD) Trading Signals (CMACDTR)</td><td id="b5"></td><td id="c5"></td><td id="d5"></td></tr>
                <tr><td>Tool #5 Signal Moving Average Convergence Divergence (MACD) Trading Signals (SMACDTR)</td><td id="b6"></td><td id="c6"></td><td id="d6"></td></tr>
                <tr><td>Tool #6 Rate of Change Trading Signals (ROCTR)</td><td id="b7"></td><td id="c7"></td><td id="d7"></td></tr>
                <tr><td>Tool #7 Relative Strength Index Trading Signals (RSITR)</td><td id="b8"></td><td id="c8"></td><td id="d8"></td></tr>
                <tr><td>Tool #8 Stop and Reverse Trading Signals (SARTR)</td><td id="b9"></td><td id="c9"></td><td id="d9"></td></tr>
                <tr><td>Tool #9 Stochastic Momentum Index Trading Signals (SMITR)</td><td id="b10"></td><td id="c10"></td><td id="d10"></td></tr>
                <tr><td>Tool #10 Williams % R Trading Signals (WPRTR)</td><td id="b11"></td><td id="c11"></td><td id="d11"></td></tr>
                <tr><td>Tool #11 Commodity Channel Index Simple Moving Average Trading Signals (CCISMATR)</td><td id="b12"></td><td id="c12"></td><td id="d12"></td></tr>
                <tr><td>Tool #12 Rate of Change Simple Moving Average Trading Signals (ROCSMATR)</td><td id="b13"></td><td id="c13"></td><td id="d13"></td></tr>
                <tr><td>Tool #13 Relative Strength Index Simple Moving Average Trading Signals (RSISMATR)</td><td id="b14"></td><td id="c14"></td><td id="d14"></td></tr>
                <tr><td>Tool #14 Stochastic Momentum Index Simple Moving Average Trading Signals (SMISMATR)</td><td id="b15"></td><td id="c15"></td><td id="d15"></td></tr>
                <tr><td>Tool #15 Williams % R Simple Moving Average Trading Signals (WPRSMATR)</td><td id="b16"></td><td id="c16"></td><td id="d16"></td></tr>
                <!-- Tool Group Voice Count (TGVC) row -->
                <tr><td>Tool Group Voice Count (TGVC)</td><td id="b17"></td><td id="c17"></td></tr>
                <!-- VIP % row -->
                <tr><td>VIP %</td><td id="b18" class="green-cell"></td><td id="c18" class="red-cell"></td></tr>
            </tbody>
        </table>
    </div>

    <!-- Chart Section for All Tools -->
    <div class="section" id="chartSection">
        <h2>Tool #s 1-15 Votes Chart</h2>
        <canvas id="allToolsVotesChart" width="800" height="400"></canvas>
    </div>
   
    <script src="main.js?v=2.0"></script>
    <script src="fetch-gcf.js"></script>

    <script>
        // Set the minimum date for the date picker inputs
        document.addEventListener('DOMContentLoaded', function() {
            const minDate = '2015-01-01';
            document.getElementById('start-date').setAttribute('min', minDate);
            document.getElementById('end-date').setAttribute('min', minDate);
        });

        // Handle pre-select buttons for date ranges
        document.querySelectorAll('.pre-select').forEach(button => {
            button.addEventListener('click', function() {
                const range = this.getAttribute('data-range');
                const endDate = new Date();
                let startDate;

                switch (range) {
                    case '1D':
                        startDate = new Date(endDate);
                        startDate.setDate(endDate.getDate() - 1);
                        break;
                    case '5D':
                        startDate = new Date(endDate);
                        startDate.setDate(endDate.getDate() - 5);
                        break;
                    case '3M':
                        startDate = new Date(endDate);
                        startDate.setMonth(endDate.getMonth() - 3);
                        break;
                    case '6M':
                        startDate = new Date(endDate);
                        startDate.setMonth(endDate.getMonth() - 6);
                        break;
                    case 'YTD':
                        startDate = new Date(endDate.getFullYear(), 0, 1);
                        break;
                    case '1Y':
                        startDate = new Date(endDate);
                        startDate.setFullYear(endDate.getFullYear() - 1);
                        break;
                    case '5Y':
                        startDate = new Date(endDate);
                        startDate.setFullYear(endDate.getFullYear() - 5);
                        break;
                    case 'MAX':
                        startDate = new Date('2015-01-01');
                        break;
                }

                document.getElementById('start-date').value = startDate.toISOString().split('T')[0];
                document.getElementById('end-date').value = endDate.toISOString().split('T')[0];
            });
        });
    </script>

    <!-- Privacy Settings Section -->
    <div style="position: fixed; bottom: 10px; right: 10px; z-index: 1000; background: rgba(255,255,255,0.95); padding: 10px; border-radius: 8px; border: 1px solid #ddd; font-size: 0.8rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
      <div style="font-weight: bold; margin-bottom: 5px; color: #333;">
        🔒 Privacy Settings
      </div>
      <div id="privacyStatus" style="margin-bottom: 8px; color: #666;">
        Checking privacy preferences...
      </div>
      <div style="display: flex; gap: 5px; flex-wrap: wrap;">
        <button onclick="enableAnalytics()" style="background: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 0.7rem; cursor: pointer;">
          ✅ Enable
        </button>
        <button onclick="disableAnalytics()" style="background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 0.7rem; cursor: pointer;">
          ❌ Disable
        </button>
        <button onclick="showPrivacyInfo()" style="background: #007bff; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 0.7rem; cursor: pointer;">
          ℹ️ Info
        </button>
      </div>
    </div>

  <script>
    // Privacy Management Functions
    // Mobile-friendly tooltip system with decoupled lightbulb control
    document.addEventListener('DOMContentLoaded', function() {
      const tooltips = document.querySelectorAll('.tooltip');
      
      tooltips.forEach(tooltip => {
        // Handle clicks on the tooltip container
        tooltip.addEventListener('click', function(e) {
          // Check if we're on a touch device
          if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
            const rect = this.getBoundingClientRect();
            const clickX = e.clientX - rect.left;
            const clickY = e.clientY - rect.top;
            
            // Expanded click area for the lightbulb (positioned above and right of button)
            // Allow clicks in the extended area above the button where lightbulb appears
            const isLightbulbClick = (clickX > rect.width - 110 && clickY < 15 && clickY > -25) ||
                                   (e.target.closest && e.target.textContent && e.target.textContent.includes('💡'));
            
            if (isLightbulbClick) {
              e.preventDefault();
              e.stopPropagation();
              
              // Toggle tooltip visibility
              const wasActive = this.classList.contains('active');
              
              // Remove active class from all other tooltips
              tooltips.forEach(t => {
                if (t !== this) t.classList.remove('active');
              });
              
              // Toggle this tooltip
              if (wasActive) {
                this.classList.remove('active');
              } else {
                this.classList.add('active');
              }
              
              // Force a reflow to ensure the change takes effect
              this.offsetHeight;
            }
            // If not lightbulb click, let the button handle it normally
          }
        });
        
        // Handle button clicks normally (no tooltip interference)
        const button = tooltip.querySelector('button');
        if (button) {
          button.addEventListener('click', function(e) {
            // On touch devices, don't interfere with button functionality
            if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
              // Let the button work normally without affecting tooltips
              return;
            }
          });
        }
      });
      
      // Handle chart navigation button clicks for 'tr' buttons
      tooltips.forEach(tooltip => {
        if (tooltip.classList.contains('has-chart')) {
          tooltip.addEventListener('click', function(e) {
            if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
              const rect = this.getBoundingClientRect();
              const clickX = e.clientX - rect.left;
              const clickY = e.clientY - rect.top;
              
              // Check if click is on the chart navigation button (left side)
              const isChartNavClick = clickX < 110 && clickY < 15 && clickY > -25;
              
              if (isChartNavClick) {
                e.preventDefault();
                e.stopPropagation();
                
                // Scroll to chart section
                const chartSection = document.getElementById('chartSection');
                if (chartSection) {
                  chartSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
              }
            }
          });
        }
      });
      
      // Close tooltips when clicking outside
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.tooltip')) {
          tooltips.forEach(t => t.classList.remove('active'));
        }
      });
    });

    // Initialize privacy system after a delay to avoid conflicts
    setTimeout(function() {
      const analyticsConsent = localStorage.getItem('analytics-consent');
      
      if (!analyticsConsent) {
        // Show banner if no consent decision made
        setTimeout(() => {
          const privacyBanner = document.getElementById('privacyBanner');
          if (privacyBanner) {
            privacyBanner.classList.add('show');
          }
        }, 2000);
      }
      
      // Update privacy settings status
      updatePrivacyStatus();
    }, 1500);

    function acceptAnalytics() {
      localStorage.setItem('analytics-consent', 'granted');
      location.reload(); // Reload to activate analytics
      document.getElementById('privacyBanner').classList.remove('show');
    }

    function declineAnalytics() {
      window.clearAnalytics();
      document.getElementById('privacyBanner').classList.remove('show');
    }

    function updatePrivacyStatus() {
      const consent = localStorage.getItem('analytics-consent');
      const statusEl = document.getElementById('privacyStatus');
      
      if (!statusEl) return;
      
      if (consent === 'granted') {
        statusEl.textContent = '✅ Analytics enabled - helping improve the tool';
        statusEl.style.color = '#28a745';
      } else if (consent === 'denied') {
        statusEl.textContent = '❌ Analytics disabled - your privacy is protected';
        statusEl.style.color = '#dc3545';
      } else {
        statusEl.textContent = '⚪ No preference set - click to choose';
        statusEl.style.color = '#6c757d';
      }
    }

    function enableAnalytics() {
      localStorage.setItem('analytics-consent', 'granted');
      updatePrivacyStatus();
      location.reload(); // Reload to activate analytics
      const banner = document.getElementById('privacyBanner');
      if (banner) banner.classList.remove('show');
    }

    function disableAnalytics() {
      localStorage.setItem('analytics-consent', 'denied');
      window.clearAnalytics();
      updatePrivacyStatus();
      const banner = document.getElementById('privacyBanner');
      if (banner) banner.classList.remove('show');
    }

    function showPrivacyInfo() {
      const consent = localStorage.getItem('analytics-consent');
      alert('Privacy Information:\n\n' +
            '• We use Google Analytics to understand how the trading analysis tool is used\n' +
            '• All data is anonymized and aggregated\n' +
            '• No personal information is collected or stored\n' +
            '• Cookies expire after 24 hours\n' +
            '• You can enable/disable analytics anytime\n' +
            '• The tool works fully without analytics\n\n' +
            'Current status: ' + (consent || 'Not set') + '\n\n' +
            'Use the Enable/Disable buttons in Privacy Settings to change your choice anytime.');
    }

    // Helper function to reset privacy settings (for debugging)
    function resetPrivacySettings() {
      localStorage.removeItem('analytics-consent');
      location.reload();
    }
  </script>

  <!-- Privacy Consent Banner -->
  <div id="privacyBanner" class="privacy-banner">
    <div class="privacy-banner-content">
      <div class="privacy-banner-text">
        🍪 <strong>Privacy Notice:</strong> This trading analysis tool uses analytics to improve your experience. We anonymize all data and don't track personal information.
      </div>
      <div class="privacy-banner-buttons">
        <button class="privacy-btn privacy-btn-accept" onclick="acceptAnalytics()">
          ✅ Accept
        </button>
        <button class="privacy-btn privacy-btn-decline" onclick="declineAnalytics()">
          ❌ Decline
        </button>
        <button class="privacy-btn privacy-btn-info" onclick="showPrivacyInfo()">
          ℹ️ Info
        </button>
      </div>
    </div>
  </div>


</body>

</html>